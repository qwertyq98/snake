(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))h(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const S of r.addedNodes)S.tagName==="LINK"&&S.rel==="modulepreload"&&h(S)}).observe(document,{childList:!0,subtree:!0});function p(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function h(s){if(s.ep)return;s.ep=!0;const r=p(s);fetch(s.href,r)}})();function i(t,n){return Math.floor(Math.random()*(n-t))+t}let g=20,M=0,y=0,k,u="low",a=!1,m=0;const L=document.querySelector(".start"),w=document.querySelector(".stop"),v=document.querySelector(".score"),c=document.getElementById("game"),f=c.getContext("2d"),C=document.querySelectorAll(".speed"),T=document.querySelector(".speed_low"),P=document.querySelector(".speed_medium"),R=document.querySelector(".speed_hard"),b=document.querySelector(".container__finish-game"),H=document.querySelector(".finish-score"),o=20,d=20,e={x:i(0,d)*o,y:i(0,d)*o,dx:o,dy:0,cells:[],maxCells:3},l={x:i(0,d)*o,y:i(0,d)*o};v.innerHTML=`score: ${y}`;T.classList.add("active");function q(t){u!==t.target.innerHTML&&A();const n=t.target,p=document.querySelector(".border");switch(C.forEach(h=>{h.classList.remove("active")}),p.classList.remove("border-red"),n.innerHTML){case"medium":g=6,u="medium",n.classList.add("active");break;case"low":g=20,u="low",n.classList.add("active");break;case"hard":g=6,u="hard",p.classList.add("border-red"),n.classList.add("active");break}}function B(){e.x<0?e.x=c.width-o:e.x>=c.width&&(e.x=0),e.y<0?e.y=c.height-o:e.y>=c.height&&(e.y=0)}function A(){y=0,v.innerHTML=`score: ${y}`,e.x=i(0,d)*o,e.y=i(0,d)*o,e.cells=[],e.maxCells=3,e.dx=o,e.dy=0,E(),cancelAnimationFrame(k),w.style.display="none",L.style.display="block"}function F(){(e.x<0||e.x>=c.width||e.y<0||e.y>=c.height)&&(b.style.display="flex",H.innerHTML=`your score: ${y}`,A())}function E(){l.x=i(0,d)*o,l.y=i(0,d)*o;for(let t=0;t<e.cells.length;t++)if(l.x===e.cells[t].x&&l.y===e.cells[t].y){E();break}}function O(){if(k=requestAnimationFrame(O),!(++M<g)){M=0,f.clearRect(0,0,c.width,c.height),e.x+=e.dx,e.y+=e.dy,u==="hard"?F():B(),e.cells.unshift({x:e.x,y:e.y}),e.cells.length>e.maxCells&&e.cells.pop(),f.fillStyle="#d12527",f.fillRect(l.x,l.y,o-1,o-1),f.fillStyle="#bdda57",e.cells.forEach(function(t){f.fillRect(t.x,t.y,o-1,o-1)});for(let t=1;t<e.cells.length;t++)e.x===e.cells[t].x&&e.y===e.cells[t].y&&(b.style.display="flex",H.innerHTML=`your score: ${y}`,A());e.x===l.x&&e.y===l.y&&(e.maxCells++,v.innerHTML=`score: ${++y}`,E())}}function _(){console.log(Date.now()-m),Date.now()-m>300?a=!1:a=!0,m=0}function x(){m===0?m=Date.now():_()}document.addEventListener("keydown",function(t){t.key==="ArrowLeft"&&e.dx===0?(x(),a||(e.dx=-o,e.dy=0)):t.key==="ArrowUp"&&e.dy===0?(x(),a||(e.dy=-o,e.dx=0)):t.key==="ArrowRight"&&e.dx===0?(x(),a||(e.dx=o,e.dy=0)):t.key==="ArrowDown"&&e.dy===0&&(x(),a||(e.dy=o,e.dx=0))});T.addEventListener("click",q);P.addEventListener("click",q);R.addEventListener("click",q);L.addEventListener("click",()=>{requestAnimationFrame(O),b.style.display="none",w.style.display="block",L.style.display="none"});w.addEventListener("click",()=>{cancelAnimationFrame(k),w.style.display="none",L.style.display="block"});
