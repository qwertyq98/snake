(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))m(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const L of s.addedNodes)L.tagName==="LINK"&&L.rel==="modulepreload"&&m(L)}).observe(document,{childList:!0,subtree:!0});function f(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function m(o){if(o.ep)return;o.ep=!0;const s=f(o);fetch(o.href,s)}})();function i(t,n){return Math.floor(Math.random()*(n-t))+t}let p=20,q=0,a=0,g,u="low";const h=document.querySelector(".start"),x=document.querySelector(".stop"),w=document.querySelector(".score"),c=document.getElementById("game"),y=c.getContext("2d"),H=document.querySelectorAll(".speed"),A=document.querySelector(".speed_low"),O=document.querySelector(".speed_medium"),T=document.querySelector(".speed_hard"),v=document.querySelector(".container__finish-game"),E=document.querySelector(".finish-score"),r=20,d=20,e={x:i(0,d)*r,y:i(0,d)*r,dx:r,dy:0,cells:[],maxCells:3},l={x:i(0,d)*r,y:i(0,d)*r};w.innerHTML=`score: ${a}`;A.classList.add("active");function S(t){u!==t.target.innerHTML&&b();const n=t.target,f=document.querySelector(".border");switch(H.forEach(m=>{m.classList.remove("active")}),f.classList.remove("border-red"),n.innerHTML){case"medium":p=6,u="medium",n.classList.add("active");break;case"low":p=20,u="low",n.classList.add("active");break;case"hard":p=6,u="hard",f.classList.add("border-red"),n.classList.add("active");break}}function C(){e.x<0?e.x=c.width-r:e.x>=c.width&&(e.x=0),e.y<0?e.y=c.height-r:e.y>=c.height&&(e.y=0)}function b(){a=0,w.innerHTML=`score: ${a}`,e.x=i(0,d)*r,e.y=i(0,d)*r,e.cells=[],e.maxCells=3,e.dx=r,e.dy=0,k(),cancelAnimationFrame(g),x.style.display="none",h.style.display="block"}function R(){(e.x<0||e.x>=c.width||e.y<0||e.y>=c.height)&&(v.style.display="flex",E.innerHTML=`your score: ${a}`,b())}function k(){l.x=i(0,d)*r,l.y=i(0,d)*r;for(let t=0;t<e.cells.length;t++)if(l.x===e.cells[t].x&&l.y===e.cells[t].y){k();break}}function M(){if(g=requestAnimationFrame(M),!(++q<p)){q=0,y.clearRect(0,0,c.width,c.height),e.x+=e.dx,e.y+=e.dy,u==="hard"?R():C(),e.cells.unshift({x:e.x,y:e.y}),e.cells.length>e.maxCells&&e.cells.pop(),y.fillStyle="#d12527",y.fillRect(l.x,l.y,r-1,r-1),y.fillStyle="#bdda57",e.cells.forEach(function(t){y.fillRect(t.x,t.y,r-1,r-1)});for(let t=1;t<e.cells.length;t++)e.x===e.cells[t].x&&e.y===e.cells[t].y&&(v.style.display="flex",E.innerHTML=`your score: ${a}`,b());e.x===l.x&&e.y===l.y&&(e.maxCells++,w.innerHTML=`score: ${++a}`,k())}}document.addEventListener("keydown",function(t){t.key==="ArrowLeft"&&e.dx===0?(e.dx=-r,e.dy=0):t.key==="ArrowUp"&&e.dy===0?(e.dy=-r,e.dx=0):t.key==="ArrowRight"&&e.dx===0?(e.dx=r,e.dy=0):t.key==="ArrowDown"&&e.dy===0&&(e.dy=r,e.dx=0)});A.addEventListener("click",S);O.addEventListener("click",S);T.addEventListener("click",S);h.addEventListener("click",()=>{requestAnimationFrame(M),v.style.display="none",x.style.display="block",h.style.display="none"});x.addEventListener("click",()=>{cancelAnimationFrame(g),x.style.display="none",h.style.display="block"});
