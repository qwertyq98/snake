(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))m(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const g of s.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&m(g)}).observe(document,{childList:!0,subtree:!0});function f(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function m(o){if(o.ep)return;o.ep=!0;const s=f(o);fetch(o.href,s)}})();function i(t,n){return Math.floor(Math.random()*(n-t))+t}let p=20,E=0,a=0,v,u="low",h=0,w="";const x=document.querySelector(".start"),L=document.querySelector(".stop"),k=document.querySelector(".score"),c=document.getElementById("game"),y=c.getContext("2d"),T=document.querySelectorAll(".speed"),M=document.querySelector(".speed_low"),C=document.querySelector(".speed_medium"),P=document.querySelector(".speed_hard"),S=document.querySelector(".container__finish-game"),O=document.querySelector(".finish-score"),r=20,d=20,e={x:i(0,d)*r,y:i(0,d)*r,dx:r,dy:0,cells:[],maxCells:3},l={x:i(0,d)*r,y:i(0,d)*r};k.innerHTML=`score: ${a}`;M.classList.add("active");function b(t){u!==t.target.innerHTML&&q();const n=t.target,f=document.querySelector(".border");switch(T.forEach(m=>{m.classList.remove("active")}),f.classList.remove("border-red"),n.innerHTML){case"medium":p=6,u="medium",n.classList.add("active");break;case"low":p=20,u="low",n.classList.add("active");break;case"hard":p=6,u="hard",f.classList.add("border-red"),n.classList.add("active");break}}function R(){e.x<0?e.x=c.width-r:e.x>=c.width&&(e.x=0),e.y<0?e.y=c.height-r:e.y>=c.height&&(e.y=0)}function q(){a=0,k.innerHTML=`score: ${a}`,e.x=i(0,d)*r,e.y=i(0,d)*r,e.cells=[],e.maxCells=3,e.dx=r,e.dy=0,A(),cancelAnimationFrame(v),L.style.display="none",x.style.display="block"}function F(){(e.x<0||e.x>=c.width||e.y<0||e.y>=c.height)&&(S.style.display="flex",O.innerHTML=`your score: ${a}`,q())}function A(){l.x=i(0,d)*r,l.y=i(0,d)*r;for(let t=0;t<e.cells.length;t++)if(l.x===e.cells[t].x&&l.y===e.cells[t].y){A();break}}function H(){if(v=requestAnimationFrame(H),!(++E<p)){E=0,h>1&&(w=""),h=0,y.clearRect(0,0,c.width,c.height),e.x+=e.dx,e.y+=e.dy,u==="hard"?F():R(),e.cells.unshift({x:e.x,y:e.y}),e.cells.length>e.maxCells&&e.cells.pop(),y.fillStyle="#d12527",y.fillRect(l.x,l.y,r-1,r-1),y.fillStyle="#bdda57",e.cells.forEach(function(t){y.fillRect(t.x,t.y,r-1,r-1)});for(let t=1;t<e.cells.length;t++)e.x===e.cells[t].x&&e.y===e.cells[t].y&&(S.style.display="flex",O.innerHTML=`your score: ${a}`,q());e.x===l.x&&e.y===l.y&&(e.maxCells++,k.innerHTML=`score: ${++a}`,A())}}document.addEventListener("keydown",function(t){w!==t.key&&(w=t.key,h++,h===1&&(t.key==="ArrowLeft"&&e.dx===0?(e.dx=-r,e.dy=0):t.key==="ArrowUp"&&e.dy===0?(e.dy=-r,e.dx=0):t.key==="ArrowRight"&&e.dx===0?(e.dx=r,e.dy=0):t.key==="ArrowDown"&&e.dy===0&&(e.dy=r,e.dx=0)))});M.addEventListener("click",b);C.addEventListener("click",b);P.addEventListener("click",b);x.addEventListener("click",()=>{requestAnimationFrame(H),S.style.display="none",L.style.display="block",x.style.display="none"});L.addEventListener("click",()=>{cancelAnimationFrame(v),L.style.display="none",x.style.display="block"});
