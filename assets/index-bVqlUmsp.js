(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))f(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const g of o.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&f(g)}).observe(document,{childList:!0,subtree:!0});function u(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function f(s){if(s.ep)return;s.ep=!0;const o=u(s);fetch(s.href,o)}})();function i(t,c){return Math.floor(Math.random()*(c-t))+t}let m=20,q=0,p=0,L,y="low";const h=document.querySelector(".start"),x=document.querySelector(".stop"),w=document.querySelector(".score"),l=document.getElementById("game"),a=l.getContext("2d"),M=document.querySelectorAll(".speed"),A=document.querySelector(".speed_low"),O=document.querySelector(".speed_medium"),C=document.querySelector(".speed_hard"),v=document.querySelector(".container__finish-game"),r=20,d=20,e={x:i(0,d)*r,y:i(0,d)*r,dx:r,dy:0,cells:[],maxCells:3},n={x:i(0,d)*r,y:i(0,d)*r};w.innerHTML=`score: ${p}`;A.classList.add("active");function b(t){y!==t.target.innerHTML&&k();const c=t.target,u=document.querySelector(".border");switch(M.forEach(f=>{f.classList.remove("active")}),u.classList.remove("border-red"),c.innerHTML){case"medium":m=6,y="medium",c.classList.add("active");break;case"low":m=20,y="low",c.classList.add("active");break;case"hard":m=6,y="hard",u.classList.add("border-red"),c.classList.add("active");break}}function H(){e.x<0?e.x=l.width-r:e.x>=l.width&&(e.x=0),e.y<0?e.y=l.height-r:e.y>=l.height&&(e.y=0)}function k(){p=0,w.innerHTML=`score: ${p}`,e.x=i(0,d)*r,e.y=i(0,d)*r,e.cells=[],e.maxCells=3,e.dx=r,e.dy=0,S(),cancelAnimationFrame(L),x.style.display="none",h.style.display="block"}function R(){(e.x<0||e.x>=l.width||e.y<0||e.y>=l.height)&&(v.style.display="flex",k())}function S(){n.x=i(0,d)*r,n.y=i(0,d)*r;for(let t=0;t<e.cells.length;t++)if(n.x===e.cells[t].x&&n.y===e.cells[t].y){S();break}}function E(){if(L=requestAnimationFrame(E),!(++q<m)){q=0,a.clearRect(0,0,l.width,l.height),e.x+=e.dx,e.y+=e.dy,y==="hard"?R():H(),e.cells.unshift({x:e.x,y:e.y}),e.cells.length>e.maxCells&&e.cells.pop(),a.fillStyle="#d12527",a.fillRect(n.x,n.y,r-1,r-1),a.fillStyle="#bdda57",e.cells.forEach(function(t){a.fillRect(t.x,t.y,r-1,r-1)});for(let t=1;t<e.cells.length;t++)e.x===e.cells[t].x&&e.y===e.cells[t].y&&(v.style.display="flex",k());e.x===n.x&&e.y===n.y&&(e.maxCells++,w.innerHTML=`score: ${++p}`,S())}}document.addEventListener("keydown",function(t){t.key==="ArrowLeft"&&e.dx===0?(e.dx=-r,e.dy=0):t.key==="ArrowUp"&&e.dy===0?(e.dy=-r,e.dx=0):t.key==="ArrowRight"&&e.dx===0?(e.dx=r,e.dy=0):t.key==="ArrowDown"&&e.dy===0&&(e.dy=r,e.dx=0)});A.addEventListener("click",b);O.addEventListener("click",b);C.addEventListener("click",b);h.addEventListener("click",()=>{requestAnimationFrame(E),v.style.display="none",x.style.display="block",h.style.display="none"});x.addEventListener("click",()=>{cancelAnimationFrame(L),x.style.display="none",h.style.display="block"});
